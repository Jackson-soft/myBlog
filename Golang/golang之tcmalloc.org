#+TITLE: Go的内存分配

** 说明

** 内存对齐

*** 对齐系数

每个字段在内存中的偏移量是对齐系数的倍数即可。

在 /C++/ 中可以通过 /#pragma pack(n)/ 来设置内存对齐系数。在 /Go/ 是 /AMD64/ 系统下默认是8。

*** 合理的字段顺序可以减少内存的开销

内存对齐会影响 /struct/ 的内存占用大小。

内存对齐的规则：
+ 对于具体类型来说，对齐值=min(编译器默认对齐值，类型大小Sizeof长度)。也就是在默认设置的对齐值和类型的内存占用大小之间，取最小值为该类型的对齐值。
我的电脑默认是8，所以最大值不会超过8.
+ struct在每个字段都内存对齐之后，其本身也要进行对齐，对齐值=min(默认对齐值，字段最大类型长度)。这条也很好理解，struct的所有字段中，最大的那个类
型的长度以及默认对齐值之间，取最小的那个。
** 架构


** 接口
